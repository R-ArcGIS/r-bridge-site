---
title: Users and Groups
uid: portal-users-groups
subtitle: "Work with portal users and group memberships"
freeze: true
---

ArcGIS portals are collaborative environments where users organize into groups to share content and coordinate work. The `{arcgisutils}` package provides functions to programmatically access user profiles and group information.

## Objective

This tutorial will teach you how to:

- Get information about individual users
- List all users in a portal
- Access user profile information and group memberships
- Get information about groups

## Authentication

Working with users and groups typically requires authentication:

```{r}
library(arcgisutils)

# Authenticate to your portal
token <- auth_user()
set_arc_token(token)
```

:::{.callout-note}
Some user and group information may be publicly accessible, but most operations require an authenticated session.
:::

## Working with Users

### Getting User Information

You can retrieve information about a specific user using `arc_user()`, which accepts either a username or user ID:

```{r}
# Get user by username
josiah <- arc_user("jparry_ANGP")
josiah
```

The `arc_user()` function returns a `PortalUser` object, which is a list with a custom print method. The object contains extensive information about the user:

```{r}
# View all available fields
names(josiah)
```

### Accessing User Profile Details

User objects contain many useful fields:

```{r}
# User's full name
josiah$fullName

# User's email
josiah$email

# User role
josiah$role

# Account creation date
josiah$created

# Last modified date
josiah$modified
```

### Viewing User's Groups

One particularly useful field is the `groups` data frame, which contains information about all groups the user belongs to:

```{r}
# View user's groups
josiah$groups

# Extract just the group titles
josiah$groups$title
```

### Getting the Current User

To get information about yourself (the currently authenticated user), use `arc_user_self()`:

```{r}
# Get your own user information
me <- arc_user_self()
me

# Your username
me$username

# Your organization ID
me$orgId
```

:::{.callout-tip}
`arc_user_self()` is useful when you need to programmatically work with your own content or verify your authentication status.
:::

## Listing All Portal Users

To retrieve a list of all users in your portal, use `arc_portal_users()`:

```{r}
# Get all users in the portal
all_users <- arc_portal_users()
all_users
```

This returns a data frame with information about each user:

```{r}
# View specific columns
all_users[c("id", "username", "userType", "created", "modified")]
```

### Using User IDs

Once you have user IDs from `arc_portal_users()`, you can fetch detailed information about specific users:

```{r}
# Filter to get a specific user's ID
josiah_id <- subset(
  all_users,
  username == "jparry_ANGP",
  select = "id",
  drop = TRUE
)

# Get detailed user information by ID
arc_user(josiah_id)
```

You can use this approach with multiple IDs to fetch information about several users at once.

## Working with Groups

### Getting Group Information

If you have a group ID, you can retrieve metadata about the group using `arc_group()`:

```{r}
# Get group by ID
web_app_templates <- arc_group("2f0ec8cb03574128bd673cefab106f39")

# View the structure
str(web_app_templates, max.level = 1)
```

The `arc_group()` function returns a `PortalGroup` object containing information such as:

```{r}
# Group title
web_app_templates$title

# Group description
web_app_templates$description

# Group owner
web_app_templates$owner

# Group access level (private, org, public)
web_app_templates$access

# Number of items in the group
web_app_templates$numItems
```

### Finding Group IDs

Group IDs can be found in several ways:

1. From a user's groups:

```{r}
# Get groups for a user
user <- arc_user("jparry_ANGP")

# View group IDs and titles
user$groups[c("id", "title")]
```

2. From the group URL in ArcGIS Online or Enterprise. The group ID is in the URL:
   ```
   https://www.arcgis.com/home/group.html?id=GROUP_ID_HERE
   ```

3. From your own groups as the current user:

```{r}
# Get your groups
me <- arc_user_self()
me$groups[c("id", "title")]
```

## Common Workflows

### Finding Users in a Specific Group

While there isn't a direct "get group members" function, you can find users who belong to a specific group by checking user profiles:

```{r}
# Get all portal users
all_users <- arc_portal_users()

# Define the group ID you're interested in
target_group_id <- "2f0ec8cb03574128bd673cefab106f39"

# Filter users who belong to this group
# Note: This requires fetching each user's full profile
# which can be slow for large organizations
```

:::{.callout-warning}
Retrieving full user profiles for all portal users can be time-consuming in large organizations. Consider caching results or limiting queries when possible.
:::

### Auditing User Accounts

List users by their account type and creation date:

```{r}
# Get all users
users <- arc_portal_users()

# View user types and when accounts were created
users[c("username", "userType", "created", "modified")]

# Filter to specific user types
creator_users <- subset(users, userType == "creatorUT")
viewer_users <- subset(users, userType == "viewerUT")
```

### Working with User Content

Combine user functions with content functions to explore what users have published:

```{r}
# Get a user
user <- arc_user("jparry_ANGP")

# Get their content
user_items <- arc_user_content(user$username)
user_items

# See what types of content they have
table(user_items$type)
```

## Summary

You now know how to:

- Get individual user information with `arc_user()` and `arc_user_self()`
- List all portal users with `arc_portal_users()`
- Access user profile details and group memberships
- Get group metadata with `arc_group()`

These functions enable you to programmatically manage and audit your portal's user base and group structure, which is especially valuable for:

- Automating user reports
- Auditing group memberships
- Discovering content by user or group
- Building custom portal dashboards
